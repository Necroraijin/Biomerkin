{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{DollarSign,TrendingUp,TrendingDown,AlertTriangle,CheckCircle,Lightbulb,Target,BarChart3,PieChart,Activity}from'lucide-react';import{BarChart,Bar,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer,PieChart as RechartsPieChart,Pie,Cell,LineChart,Line}from'recharts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CostDashboard=()=>{const[dashboardData,setDashboardData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{fetchCostData();},[]);const fetchCostData=async()=>{try{setLoading(true);// Mock data for demonstration\nconst mockData={current_costs:{total_cost:45.67,currency:'USD',period_days:7,service_breakdown:{'Amazon Lambda':12.34,'Amazon DynamoDB':8.90,'Amazon S3':5.43,'Amazon API Gateway':4.21,'Amazon Bedrock':10.50,'Amazon CloudWatch':2.15,'Amazon SNS':1.20,'Amazon SQS':0.94}},optimization_recommendations:[{service:'Amazon Lambda',type:'memory_optimization',description:'Optimize Lambda memory allocation based on actual usage patterns',potential_savings:15.0,currency:'USD',confidence:0.85,effort:'low',priority:'medium'},{service:'Amazon DynamoDB',type:'billing_mode',description:'Switch to on-demand billing for variable workloads',potential_savings:30.0,currency:'USD',confidence:0.90,effort:'low',priority:'high'},{service:'Amazon S3',type:'lifecycle_policies',description:'Implement lifecycle policies for data archival',potential_savings:40.0,currency:'USD',confidence:0.95,effort:'low',priority:'high'},{service:'Amazon Bedrock',type:'model_selection',description:'Use smaller models for simple tasks to reduce costs',potential_savings:20.0,currency:'USD',confidence:0.80,effort:'medium',priority:'medium'}],cost_trends:{trend:'stable',change_percent:2.5,daily_costs:{'2024-01-01':6.2,'2024-01-02':6.8,'2024-01-03':5.9,'2024-01-04':7.1,'2024-01-05':6.5,'2024-01-06':6.3,'2024-01-07':6.7},average_daily_cost:6.5,total_period_cost:45.5,period_days:7},budget_alerts:[{budget_name:'Biomerkin Monthly Budget',threshold:75,current_spend:45.67,alert_type:'forecasted',severity:'low',timestamp:new Date().toISOString()}],summary:{total_current_cost:45.67,total_potential_savings:105.0,optimization_score:78,recommendations_count:4,alerts_count:1,last_updated:new Date().toISOString()}};setDashboardData(mockData);}catch(err){setError('Failed to load cost data');}finally{setLoading(false);}};const getPriorityColor=priority=>{switch(priority){case'critical':return'text-red-600 bg-red-100';case'high':return'text-orange-600 bg-orange-100';case'medium':return'text-yellow-600 bg-yellow-100';case'low':return'text-green-600 bg-green-100';default:return'text-gray-600 bg-gray-100';}};const getEffortColor=effort=>{switch(effort){case'high':return'text-red-600 bg-red-100';case'medium':return'text-yellow-600 bg-yellow-100';case'low':return'text-green-600 bg-green-100';default:return'text-gray-600 bg-gray-100';}};const getSeverityColor=severity=>{switch(severity){case'critical':return'text-red-600 bg-red-100';case'high':return'text-orange-600 bg-orange-100';case'medium':return'text-yellow-600 bg-yellow-100';case'low':return'text-green-600 bg-green-100';default:return'text-gray-600 bg-gray-100';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-96\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"mx-auto h-12 w-12 text-red-500 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:error})]});}const{current_costs,optimization_recommendations,cost_trends,budget_alerts,summary}=dashboardData;// Prepare chart data\nconst serviceChartData=Object.entries(current_costs.service_breakdown).map(_ref=>{let[service,cost]=_ref;return{service:service.replace('Amazon ',''),cost:cost};});const trendChartData=Object.entries(cost_trends.daily_costs).map(_ref2=>{let[date,cost]=_ref2;return{date:new Date(date).toLocaleDateString(),cost:cost};});const COLORS=['#3b82f6','#ef4444','#10b981','#f59e0b','#8b5cf6','#06b6d4','#84cc16','#f97316'];return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"bg-white p-6 rounded-lg shadow-md border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"h-8 w-8 text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Current Cost\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:[\"$\",current_costs.total_cost.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"Last \",current_costs.period_days,\" days\"]})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.1},className:\"bg-white p-6 rounded-lg shadow-md border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[cost_trends.trend==='increasing'?/*#__PURE__*/_jsx(TrendingUp,{className:\"h-8 w-8 text-red-600\"}):cost_trends.trend==='decreasing'?/*#__PURE__*/_jsx(TrendingDown,{className:\"h-8 w-8 text-green-600\"}):/*#__PURE__*/_jsx(Activity,{className:\"h-8 w-8 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Cost Trend\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:[cost_trends.change_percent>0?'+':'',cost_trends.change_percent.toFixed(1),\"%\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 capitalize\",children:cost_trends.trend})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.2},className:\"bg-white p-6 rounded-lg shadow-md border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Lightbulb,{className:\"h-8 w-8 text-yellow-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Potential Savings\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:[\"$\",summary.total_potential_savings.toFixed(0)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[summary.recommendations_count,\" recommendations\"]})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.3},className:\"bg-white p-6 rounded-lg shadow-md border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Target,{className:\"h-8 w-8 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Optimization Score\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:[summary.optimization_score,\"/100\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Cost efficiency\"})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.4},className:\"bg-white p-6 rounded-lg shadow-md border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"h-5 w-5 mr-2\"}),\"Service Cost Breakdown\"]}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:serviceChartData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"service\",angle:-45,textAnchor:\"end\",height:80}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>[\"$\".concat(value.toFixed(2)),'Cost']}),/*#__PURE__*/_jsx(Bar,{dataKey:\"cost\",fill:\"#3b82f6\"})]})})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.5},className:\"bg-white p-6 rounded-lg shadow-md border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5 mr-2\"}),\"Daily Cost Trend\"]}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:trendChartData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>[\"$\".concat(value.toFixed(2)),'Cost']}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"cost\",stroke:\"#3b82f6\",strokeWidth:2})]})})]})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.6},className:\"bg-white p-6 rounded-lg shadow-md border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Lightbulb,{className:\"h-5 w-5 mr-2\"}),\"Optimization Recommendations\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:optimization_recommendations.map((rec,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:rec.service}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:rec.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-green-600\",children:[\"Potential Savings: $\",rec.potential_savings.toFixed(2)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"Confidence: \",(rec.confidence*100).toFixed(0),\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(getPriorityColor(rec.priority)),children:rec.priority}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(getEffortColor(rec.effort)),children:[rec.effort,\" effort\"]})]})]})},index))})]}),budget_alerts.length>0&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.7},className:\"bg-white p-6 rounded-lg shadow-md border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 mr-2\"}),\"Budget Alerts\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:budget_alerts.map((alert,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:alert.budget_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Current spend: $\",alert.current_spend.toFixed(2),\" | Threshold: \",alert.threshold,\"%\"]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-medium \".concat(getSeverityColor(alert.severity)),children:alert.severity})]},index))})]})]});};export default CostDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}