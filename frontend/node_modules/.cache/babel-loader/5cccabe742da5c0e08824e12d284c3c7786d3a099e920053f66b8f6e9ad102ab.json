{"ast":null,"code":"import _objectSpread from\"C:/Users/Sumit/Desktop/Biomerkin/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Play,Pause,RotateCcw,FastForward,Brain,Dna,FileText,Pill,CheckCircle,Loader,ArrowRight,Clock,Zap}from'lucide-react';import{demoService}from'../services/api';import LoadingSpinner from'./LoadingSpinner';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const InteractiveDemo=_ref=>{var _getCurrentAgent,_getCurrentAgent2;let{scenarioId,onComplete}=_ref;const[isPlaying,setIsPlaying]=useState(false);const[currentStep,setCurrentStep]=useState(0);const[progress,setProgress]=useState(0);const[agentStates,setAgentStates]=useState({});const[demoData,setDemoData]=useState(null);const[speed,setSpeed]=useState(1);const agents=[{id:'genomics',name:'GenomicsAgent',icon:Dna,color:'from-green-500 to-emerald-500',description:'Analyzing DNA sequence for genes and mutations',steps:['Parsing FASTA sequence file','Identifying gene regions','Detecting variants against reference','Translating to protein sequences','Generating genomics report']},{id:'proteomics',name:'ProteomicsAgent',icon:Brain,color:'from-blue-500 to-cyan-500',description:'Predicting protein structure and function',steps:['Querying PDB for structures','Analyzing protein domains','Predicting functional impact','Identifying interactions','Generating structure report']},{id:'literature',name:'LiteratureAgent',icon:FileText,color:'from-purple-500 to-pink-500',description:'Researching scientific literature',steps:['Generating search terms','Querying PubMed database','Filtering relevant articles','Summarizing with Bedrock LLM','Generating literature summary']},{id:'drug',name:'DrugAgent',icon:Pill,color:'from-orange-500 to-red-500',description:'Identifying drug candidates',steps:['Querying DrugBank database','Searching clinical trials','Analyzing drug-target interactions','Scoring effectiveness','Generating drug recommendations']},{id:'decision',name:'DecisionAgent',icon:CheckCircle,color:'from-indigo-500 to-purple-500',description:'Generating medical report',steps:['Aggregating all agent results','Analyzing clinical significance','Generating report with Bedrock','Creating recommendations','Finalizing medical report']}];useEffect(()=>{if(scenarioId){loadDemoScenario();}},[scenarioId]);useEffect(()=>{let interval;if(isPlaying&&currentStep<getTotalSteps()){interval=setInterval(()=>{setProgress(prev=>{const newProgress=prev+2*speed;// Adjust speed multiplier\nif(newProgress>=100){advanceStep();return 0;}return newProgress;});},100);}return()=>clearInterval(interval);},[isPlaying,currentStep,speed]);const loadDemoScenario=async()=>{try{const response=await demoService.getDemoScenarios();const scenario=response.data.scenarios.find(s=>s.id===scenarioId);setDemoData(scenario);}catch(err){console.error('Failed to load demo scenario:',err);}};const getTotalSteps=()=>{return agents.reduce((total,agent)=>total+agent.steps.length,0);};const getCurrentAgent=()=>{let stepCount=0;for(const agent of agents){if(currentStep<stepCount+agent.steps.length){return{agent,stepIndex:currentStep-stepCount,step:agent.steps[currentStep-stepCount]};}stepCount+=agent.steps.length;}return null;};const advanceStep=()=>{const current=getCurrentAgent();if(current){setAgentStates(prev=>_objectSpread(_objectSpread({},prev),{},{[current.agent.id]:_objectSpread(_objectSpread({},prev[current.agent.id]),{},{currentStep:current.stepIndex,status:current.stepIndex===current.agent.steps.length-1?'completed':'processing'})}));}setCurrentStep(prev=>{const next=prev+1;if(next>=getTotalSteps()){setIsPlaying(false);if(onComplete)onComplete();return prev;}return next;});};const playPause=()=>{setIsPlaying(!isPlaying);};const reset=()=>{setIsPlaying(false);setCurrentStep(0);setProgress(0);setAgentStates({});};const getAgentStatus=agentId=>{const state=agentStates[agentId];if(!state)return'pending';return state.status||'pending';};const getAgentProgress=agentId=>{const state=agentStates[agentId];const agent=agents.find(a=>a.id===agentId);if(!state||!agent)return 0;return(state.currentStep+1)/agent.steps.length*100;};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-1\",children:[\"Interactive Demo: \",(demoData===null||demoData===void 0?void 0:demoData.title)||'Loading...']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Watch our autonomous AI agents work together in real-time\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Speed:\"}),/*#__PURE__*/_jsxs(\"select\",{value:speed,onChange:e=>setSpeed(Number(e.target.value)),className:\"text-sm border border-gray-300 rounded px-2 py-1\",children:[/*#__PURE__*/_jsx(\"option\",{value:0.5,children:\"0.5x\"}),/*#__PURE__*/_jsx(\"option\",{value:1,children:\"1x\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"2x\"}),/*#__PURE__*/_jsx(\"option\",{value:4,children:\"4x\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:playPause,className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2\",children:[isPlaying?/*#__PURE__*/_jsx(Pause,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(Play,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:isPlaying?'Pause':'Play'})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:reset,className:\"border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Reset\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Overall Progress\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"Step \",currentStep+1,\" of \",getTotalSteps()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(motion.div,{className:\"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full\",initial:{width:0},animate:{width:\"\".concat(currentStep/getTotalSteps()*100+progress/getTotalSteps(),\"%\")},transition:{duration:0.3}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6\",children:agents.map((agent,index)=>{const Icon=agent.icon;const status=getAgentStatus(agent.id);const agentProgress=getAgentProgress(agent.id);const current=getCurrentAgent();const isActive=(current===null||current===void 0?void 0:current.agent.id)===agent.id;return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:index*0.1},className:\"border-2 rounded-lg p-4 transition-all duration-300 \".concat(isActive?'border-blue-500 bg-blue-50 shadow-lg':status==='completed'?'border-green-500 bg-green-50':'border-gray-200 bg-white'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg bg-gradient-to-r \".concat(agent.color,\" flex items-center justify-center\"),children:/*#__PURE__*/_jsx(Icon,{className:\"h-5 w-5 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:agent.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600\",children:agent.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[status==='completed'&&/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-green-500\"}),status==='processing'&&/*#__PURE__*/_jsx(Loader,{className:\"h-5 w-5 text-blue-500 animate-spin\"}),status==='pending'&&/*#__PURE__*/_jsx(\"div\",{className:\"h-5 w-5 rounded-full border-2 border-gray-300\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-1.5\",children:/*#__PURE__*/_jsx(motion.div,{className:\"h-1.5 rounded-full \".concat(status==='completed'?'bg-green-500':'bg-blue-500'),initial:{width:0},animate:{width:\"\".concat(agentProgress,\"%\")},transition:{duration:0.3}})})}),isActive&&current&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:'auto'},className:\"text-xs text-blue-700 bg-blue-100 rounded px-2 py-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Zap,{className:\"h-3 w-3\"}),/*#__PURE__*/_jsx(\"span\",{children:current.step})]})}),status==='completed'&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-green-700 bg-green-100 rounded px-2 py-1\",children:\"\\u2713 Analysis Complete\"})]},agent.id);})}),/*#__PURE__*/_jsx(AnimatePresence,{children:isPlaying&&getCurrentAgent()&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Brain,{className:\"h-4 w-4 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:(_getCurrentAgent=getCurrentAgent())===null||_getCurrentAgent===void 0?void 0:_getCurrentAgent.agent.name}),/*#__PURE__*/_jsx(ArrowRight,{className:\"h-4 w-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-medium\",children:(_getCurrentAgent2=getCurrentAgent())===null||_getCurrentAgent2===void 0?void 0:_getCurrentAgent2.step})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-white rounded-full h-2\",children:/*#__PURE__*/_jsx(motion.div,{className:\"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full\",initial:{width:0},animate:{width:\"\".concat(progress,\"%\")},transition:{duration:0.1}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[Math.ceil((getTotalSteps()-currentStep)/speed),\"s\"]})]})]})})}),currentStep>=getTotalSteps()&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.9},animate:{opacity:1,scale:1},className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"h-8 w-8 text-white\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"Demo Complete!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"All AI agents have completed their autonomous analysis. The medical report is ready for review.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:reset,className:\"border border-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Run Again\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:\"View Results\"})]})]})]});};export default InteractiveDemo;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}