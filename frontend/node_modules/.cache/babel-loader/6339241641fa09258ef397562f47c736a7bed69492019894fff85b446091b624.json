{"ast":null,"code":"import React,{useState}from'react';import{motion}from'framer-motion';import{FileText,Download,Printer,Share2,Eye,EyeOff,Maximize2,Minimize2,Search,BookOpen,AlertTriangle,CheckCircle,Info}from'lucide-react';import ReactMarkdown from'react-markdown';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MedicalReportViewer=_ref=>{let{reportData,workflowId}=_ref;const[isFullscreen,setIsFullscreen]=useState(false);const[showAnnotations,setShowAnnotations]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[activeSection,setActiveSection]=useState('summary');const reportSections=[{id:'summary',title:'Executive Summary',icon:FileText},{id:'genomics',title:'Genomics Analysis',icon:BookOpen},{id:'clinical',title:'Clinical Significance',icon:AlertTriangle},{id:'recommendations',title:'Recommendations',icon:CheckCircle},{id:'references',title:'References',icon:Info}];const mockReport={patientInfo:{id:workflowId,analysisDate:new Date().toLocaleDateString(),reportType:'Comprehensive Genomics Analysis'},summary:\"\\n# Executive Summary\\n\\nThis comprehensive genomics analysis has identified several clinically significant genetic variants that have important implications for cancer risk assessment and treatment planning.\\n\\n## Key Findings\\n- **High-risk pathogenic variants identified**: 2 variants in BRCA1 and TP53 genes\\n- **Cancer susceptibility**: Significantly elevated risk for hereditary breast and ovarian cancer\\n- **Treatment implications**: PARP inhibitor therapy likely to be highly effective\\n- **Family implications**: Cascade genetic testing recommended for first-degree relatives\\n\\n## Risk Assessment\\nBased on the identified genetic variants, this individual has a **HIGH** risk profile for hereditary cancer syndromes, particularly:\\n- Hereditary Breast and Ovarian Cancer (HBOC) syndrome\\n- Li-Fraumeni syndrome (partial features)\\n\\n## Immediate Actions Required\\n1. Genetic counseling consultation within 2 weeks\\n2. Enhanced cancer screening protocol implementation\\n3. Discussion of risk-reducing surgical options\\n4. Family cascade testing coordination\\n    \",genomics:\"\\n# Genomics Analysis Results\\n\\n## Variant Summary\\nThe analysis identified **29 total variants** across the analyzed genes, with **3 variants of clinical significance**.\\n\\n### Pathogenic Variants\\n\\n#### BRCA1 c.5266dupC (p.Gln1756ProfsTer74)\\n- **Classification**: Pathogenic (Class 5)\\n- **Frequency**: Rare (<0.01% in population)\\n- **Clinical Significance**: Well-established pathogenic variant associated with high cancer risk\\n- **Functional Impact**: Frameshift mutation leading to premature protein truncation\\n- **Cancer Risk**: \\n  - Breast cancer: 72% lifetime risk\\n  - Ovarian cancer: 44% lifetime risk\\n\\n#### TP53 c.524G>A (p.Arg175His)\\n- **Classification**: Likely Pathogenic (Class 4)\\n- **Frequency**: Rare (<0.001% in population)\\n- **Clinical Significance**: Hotspot mutation in DNA-binding domain\\n- **Functional Impact**: Impaired DNA binding and transcriptional activity\\n- **Cancer Risk**: Associated with Li-Fraumeni spectrum cancers\\n\\n### Variants of Uncertain Significance (VUS)\\n\\n#### BRCA1 c.181T>G (p.Cys61Gly)\\n- **Classification**: VUS (Class 3)\\n- **Frequency**: Very rare\\n- **Clinical Significance**: Insufficient evidence for pathogenicity\\n- **Recommendation**: Periodic reclassification as evidence emerges\\n    \",clinical:\"\\n# Clinical Significance and Implications\\n\\n## Cancer Risk Assessment\\n\\n### Hereditary Breast and Ovarian Cancer (HBOC)\\nThe identified BRCA1 pathogenic variant confers significantly elevated cancer risks:\\n\\n**Breast Cancer Risk**\\n- Lifetime risk: ~72% (vs. 12% general population)\\n- Early onset typical (before age 50)\\n- Higher grade, triple-negative subtype common\\n\\n**Ovarian Cancer Risk**\\n- Lifetime risk: ~44% (vs. 1.3% general population)\\n- Typically high-grade serous carcinoma\\n- Often diagnosed at advanced stage\\n\\n### Li-Fraumeni Syndrome Features\\nThe TP53 variant may contribute to:\\n- Early-onset cancers\\n- Multiple primary cancers\\n- Diverse cancer spectrum (sarcomas, brain tumors, adrenocortical carcinoma)\\n\\n## Treatment Implications\\n\\n### Therapeutic Opportunities\\n1. **PARP Inhibitor Sensitivity**\\n   - Olaparib, talazoparib, rucaparib likely highly effective\\n   - Both treatment and prevention applications\\n   \\n2. **Platinum Sensitivity**\\n   - Enhanced response to platinum-based chemotherapy\\n   - Important for treatment planning\\n\\n3. **Immunotherapy Considerations**\\n   - Potential enhanced response to checkpoint inhibitors\\n   - Tumor mutational burden implications\\n\\n### Surgical Considerations\\n- Risk-reducing bilateral mastectomy (90% risk reduction)\\n- Risk-reducing bilateral salpingo-oophorectomy (85-90% ovarian cancer risk reduction)\\n- Timing considerations based on family planning\\n    \",recommendations:\"\\n# Clinical Recommendations\\n\\n## Immediate Actions (Within 2 weeks)\\n\\n### 1. Genetic Counseling Referral\\n- **Urgency**: High priority\\n- **Purpose**: Risk assessment, family planning, surgical options discussion\\n- **Provider**: Board-certified genetic counselor or medical geneticist\\n\\n### 2. Enhanced Screening Protocol\\n**Breast Cancer Screening**\\n- Annual breast MRI starting age 25 (or 10 years before earliest family diagnosis)\\n- Annual mammography starting age 30\\n- Clinical breast examination every 6 months\\n- Monthly breast self-examination\\n\\n**Ovarian Cancer Screening**\\n- Transvaginal ultrasound and CA-125 every 6 months starting age 30\\n- Consider risk-reducing surgery by age 35-40 or after childbearing complete\\n\\n## Medium-term Actions (Within 3 months)\\n\\n### 3. Multidisciplinary Team Consultation\\n- High-risk breast clinic referral\\n- Gynecologic oncology consultation\\n- Plastic surgery consultation (if considering risk-reducing surgery)\\n\\n### 4. Family Cascade Testing\\n- First-degree relatives (parents, siblings, children over 18)\\n- Genetic counseling for family members\\n- Coordinate testing through genetics clinic\\n\\n## Long-term Management\\n\\n### 5. Lifestyle Modifications\\n- Maintain healthy weight\\n- Regular exercise\\n- Limit alcohol consumption\\n- Avoid hormone replacement therapy\\n- Consider chemoprevention options\\n\\n### 6. Reproductive Planning\\n- Preimplantation genetic diagnosis (PGD) options\\n- Fertility preservation before risk-reducing surgery\\n- Genetic counseling for reproductive decisions\\n\\n## Follow-up Schedule\\n- Genetics clinic: 6 months\\n- High-risk breast clinic: Every 6 months\\n- Gynecologic oncology: Annually\\n- Primary care: Continue routine care with awareness of genetic status\\n    \",references:\"\\n# References and Supporting Evidence\\n\\n## Clinical Guidelines\\n1. NCCN Guidelines Version 1.2024, Genetic/Familial High-Risk Assessment: Breast, Ovarian, and Pancreatic\\n2. ACMG Standards and Guidelines for the Interpretation of Sequence Variants\\n3. ASCO Policy Statement Update: Genetic and Genomic Testing for Cancer Susceptibility\\n\\n## Key Publications\\n1. Kuchenbaecker KB, et al. Risks of Breast, Ovarian, and Contralateral Breast Cancer for BRCA1 and BRCA2 Mutation Carriers. JAMA. 2017;317(23):2402-2416.\\n\\n2. Robson M, et al. Olaparib for Metastatic Breast Cancer in Patients with a Germline BRCA Mutation. N Engl J Med. 2017;377(6):523-533.\\n\\n3. Bougeard G, et al. Revisiting Li-Fraumeni Syndrome From TP53 Mutation Carriers. J Clin Oncol. 2015;33(21):2345-52.\\n\\n## Database References\\n- ClinVar: Variant classifications and clinical significance\\n- HGMD: Human Gene Mutation Database\\n- LOVD: Leiden Open Variation Database\\n- BIC: Breast Cancer Information Core\\n\\n## Laboratory Information\\n- **Testing Laboratory**: Biomerkin Genomics Laboratory\\n- **Test Method**: Next-generation sequencing with confirmatory Sanger sequencing\\n- **Coverage**: >99% for all analyzed regions\\n- **Sensitivity**: >99% for single nucleotide variants and small indels\\n    \"};const highlightSearchTerm=text=>{if(!searchTerm)return text;const regex=new RegExp(\"(\".concat(searchTerm,\")\"),'gi');return text.replace(regex,'<mark class=\"bg-yellow-200\">$1</mark>');};const downloadReport=format=>{// Implementation would depend on backend API\nconsole.log(\"Downloading report in \".concat(format,\" format\"));};const printReport=()=>{window.print();};const shareReport=()=>{if(navigator.share){navigator.share({title:'Medical Genomics Report',text:'Comprehensive genomics analysis report',url:window.location.href});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white \".concat(isFullscreen?'fixed inset-0 z-50':'rounded-lg border border-gray-200'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Medical Genomics Report\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mt-1 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Patient ID: \",mockReport.patientInfo.id]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Date: \",mockReport.patientInfo.analysisDate]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{children:mockReport.patientInfo.reportType})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search report...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAnnotations(!showAnnotations),className:\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\",title:showAnnotations?'Hide annotations':'Show annotations',children:showAnnotations?/*#__PURE__*/_jsx(EyeOff,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsFullscreen(!isFullscreen),className:\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\",title:isFullscreen?'Exit fullscreen':'Enter fullscreen',children:isFullscreen?/*#__PURE__*/_jsx(Minimize2,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(Maximize2,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 border-l border-gray-300 pl-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:printReport,className:\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\",title:\"Print report\",children:/*#__PURE__*/_jsx(Printer,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:shareReport,className:\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\",title:\"Share report\",children:/*#__PURE__*/_jsx(Share2,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(Download,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadReport('pdf'),className:\"w-full text-left px-4 py-2 hover:bg-gray-50 rounded-t-lg\",children:\"Download PDF\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadReport('docx'),className:\"w-full text-left px-4 py-2 hover:bg-gray-50\",children:\"Download Word\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadReport('html'),className:\"w-full text-left px-4 py-2 hover:bg-gray-50 rounded-b-lg\",children:\"Download HTML\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-64 border-r border-gray-200 bg-gray-50\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"p-4 space-y-2\",children:reportSections.map(section=>{const Icon=section.icon;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection(section.id),className:\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors \".concat(activeSection===section.id?'bg-blue-100 text-blue-700 font-medium':'text-gray-700 hover:bg-gray-100'),children:[/*#__PURE__*/_jsx(Icon,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:section.title})]},section.id);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-8 max-w-4xl mx-auto\",children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.3},className:\"prose prose-lg max-w-none\",children:/*#__PURE__*/_jsx(\"div\",{className:\"medical-report-content\",dangerouslySetInnerHTML:{__html:highlightSearchTerm(mockReport[activeSection]||'')}})},activeSection)})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 p-4 bg-gray-50 text-center text-sm text-gray-600\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"This report was generated by Biomerkin AI Agent System \\u2022 For questions, contact your healthcare provider \\u2022 Report ID: \",workflowId]})}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n        .medical-report-content {\\n          font-family: 'Georgia', serif;\\n          line-height: 1.6;\\n        }\\n        \\n        .medical-report-content h1 {\\n          color: #1f2937;\\n          border-bottom: 2px solid #3b82f6;\\n          padding-bottom: 0.5rem;\\n          margin-bottom: 1.5rem;\\n        }\\n        \\n        .medical-report-content h2 {\\n          color: #374151;\\n          margin-top: 2rem;\\n          margin-bottom: 1rem;\\n        }\\n        \\n        .medical-report-content h3 {\\n          color: #4b5563;\\n          margin-top: 1.5rem;\\n          margin-bottom: 0.75rem;\\n        }\\n        \\n        .medical-report-content strong {\\n          color: #1f2937;\\n        }\\n        \\n        .medical-report-content ul {\\n          margin-left: 1.5rem;\\n        }\\n        \\n        .medical-report-content li {\\n          margin-bottom: 0.5rem;\\n        }\\n        \\n        @media print {\\n          .medical-report-content {\\n            font-size: 12pt;\\n            line-height: 1.4;\\n          }\\n        }\\n      \"})]});};export default MedicalReportViewer;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}